(function(a){function c(){return+new Date}function b(a,e){for(var m in a)a.hasOwnProperty(m)&&e(a,m)}function d(a,e){b(e,function(e,b){a[b]=e[b]});return a}function f(a,e,b){for(var c in b.current)b.current.hasOwnProperty(c)&&e.to.hasOwnProperty(c)&&(b.current[c]=e.easingFunc(a-e.timestamp,e.originalState[c],e.to[c]-e.originalState[c],e.duration))}function h(a,e,b,c){var d;for(d=0;d<e[a].length;d++)e[a][d].apply(b,c)}function i(l,e,c){b(a.Tweenable.prototype.filter,function(a,b){a[b][l]&&a[b][l].apply(e,
c)})}function g(a,e){var b;b=c();b<a.timestamp+a.duration&&e.isAnimating?(i("beforeTween",a.owner,[e.current,a.originalState,a.to]),f(b,a,e),i("afterTween",a.owner,[e.current,a.originalState,a.to]),a.hook.step&&h("step",a.hook,a.owner,[e.current]),a.step.call(e.current),e.loopId=setTimeout(function(){g(a,e)},1E3/a.fps)):a.tweenController.stop(!0)}function k(a,e){this.stop=function(b){clearTimeout(e.loopId);if(b)d(e.current,a.to),e.isAnimating=!1,a.callback.call(e.current);return this};this.pause=
function(){clearTimeout(e.loopId);e.pausedAtTime=c();e.isPaused=!0;return this};this.resume=function(){e.isPaused&&(a.timestamp+=e.pausedAtTime-a.timestamp);setTimeout(function(){g(a,e)},1E3/a.owner.fps);return this};this.get=function(){return e.current};return this}function j(){this.init=function(a){a=a||{};this._hook={};this._tweenParams={owner:this,hook:this._hook};this._state={};this._state.current=a.initialState||{};this.fps=a.fps||30;this.easing=a.easing||"linear";this.duration=a.duration||
500;return this};this.tween=function(a,e,b,n,j){var f;if(!this._state.isAnimating)return f=this,this._state.loopId=0,this._state.pausedAtTime=null,e?(this._tweenParams.step=function(){},this._state.current=a||{},this._tweenParams.to=e||{},this._tweenParams.duration=b||this.duration,this._tweenParams.callback=n||function(){},this._tweenParams.easing=j||this.easing):(this._tweenParams.step=a.step||function(){},this._tweenParams.callback=a.callback||function(){},this._state.current=a.from||{},this._tweenParams.to=
a.to||{},this._tweenParams.duration=a.duration||this.duration,this._tweenParams.easing=a.easing||this.easing),this._tweenParams.timestamp=c(),this._tweenParams.easingFunc=this.formula[this._tweenParams.easing]||this.formula.linear,i("tweenCreated",this._tweenParams.owner,[this._state.current,this._tweenParams.originalState,this._tweenParams.to]),this._tweenParams.originalState=d({},this._state.current),this._tweenParams.tweenController=new k(this._tweenParams,this._state),this._state.isAnimating=
!0,setTimeout(function(){g(f._tweenParams,f._state)},1E3/this.fps),this._tweenParams.tweenController};this.hookAdd=function(a,b){this._hook.hasOwnProperty(a)||(this._hook[a]=[]);this._hook[a].push(b)};this.hookRemove=function(a,b){var c;if(this._hook.hasOwnProperty(a))if(b)for(c=this._hook[a].length;c>=0;c++)this._hook[a][c]===b&&this._hook[a].splice(c,1);else this._hook[a]=[]};return this}j.prototype.filter={};j.util={now:c,each:b,simpleCopy:d};j.prototype.formula={linear:function(a,b,c,d){return c*
a/d+b}};a.Tweenable=j})(this);Tweenable.prototype.formula.easeInQuad=function(a,c,b,d){a/=d;return b*a*a+c};Tweenable.prototype.formula.easeOutQuad=function(a,c,b,d){a/=d;return-b*a*(a-2)+c};Tweenable.prototype.formula.easeInOutQuad=function(a,c,b,d){a/=d/2;if(a<1)return b/2*a*a+c;a--;return-b/2*(a*(a-2)-1)+c};Tweenable.prototype.formula.easeInCubic=function(a,c,b,d){a/=d;return b*a*a*a+c};Tweenable.prototype.formula.easeOutCubic=function(a,c,b,d){a/=d;a--;return b*(a*a*a+1)+c};
Tweenable.prototype.formula.easeInOutCubic=function(a,c,b,d){a/=d/2;if(a<1)return b/2*a*a*a+c;a-=2;return b/2*(a*a*a+2)+c};Tweenable.prototype.formula.easeInQuart=function(a,c,b,d){a/=d;return b*a*a*a*a+c};Tweenable.prototype.formula.easeOutQuart=function(a,c,b,d){a/=d;a--;return-b*(a*a*a*a-1)+c};Tweenable.prototype.formula.easeInOutQuart=function(a,c,b,d){a/=d/2;if(a<1)return b/2*a*a*a*a+c;a-=2;return-b/2*(a*a*a*a-2)+c};
Tweenable.prototype.formula.easeInQuint=function(a,c,b,d){a/=d;return b*a*a*a*a*a+c};Tweenable.prototype.formula.easeOutQuint=function(a,c,b,d){a/=d;a--;return b*(a*a*a*a*a+1)+c};Tweenable.prototype.formula.easeInOutQuint=function(a,c,b,d){a/=d/2;if(a<1)return b/2*a*a*a*a*a+c;a-=2;return b/2*(a*a*a*a*a+2)+c};Tweenable.prototype.formula.easeInSine=function(a,c,b,d){return-b*Math.cos(a/d*(Math.PI/2))+b+c};Tweenable.prototype.formula.easeOutSine=function(a,c,b,d){return b*Math.sin(a/d*(Math.PI/2))+c};
Tweenable.prototype.formula.easeInOutSine=function(a,c,b,d){return-b/2*(Math.cos(Math.PI*a/d)-1)+c};Tweenable.prototype.formula.easeInExpo=function(a,c,b,d){return b*Math.pow(2,10*(a/d-1))+c};Tweenable.prototype.formula.easeOutExpo=function(a,c,b,d){return b*(-Math.pow(2,-10*a/d)+1)+c};Tweenable.prototype.formula.easeInOutExpo=function(a,c,b,d){a/=d/2;if(a<1)return b/2*Math.pow(2,10*(a-1))+c;a--;return b/2*(-Math.pow(2,-10*a)+2)+c};
Tweenable.prototype.formula.easeInCirc=function(a,c,b,d){a/=d;return-b*(Math.sqrt(1-a*a)-1)+c};Tweenable.prototype.formula.easeOutCirc=function(a,c,b,d){a/=d;a--;return b*Math.sqrt(1-a*a)+c};Tweenable.prototype.formula.easeInOutCirc=function(a,c,b,d){a/=d/2;if(a<1)return-b/2*(Math.sqrt(1-a*a)-1)+c;a-=2;return b/2*(Math.sqrt(1-a*a)+1)+c};
(function(a){function c(a,b){return function(){a();b.shift();if(b.length)b[0]();else b.running=!1}}function b(a,b,c,i,g,k){return function(){c?a.tween(b,c,i,g,k):(b.callback=g,a.tween(b))}}if(a.Tweenable)a.Tweenable.prototype.queue=function(a,f,h,i,g){if(!this._tweenQueue)this._tweenQueue=[];i=i||a.callback||function(){};i=c(i,this._tweenQueue);this._tweenQueue.push(b(this,a,f,h,i,g));if(!this._tweenQueue.running)this._tweenQueue[0](),this._tweenQueue.running=!0;return this},a.Tweenable.prototype.queueShift=
function(){this._tweenQueue.shift();return this},a.Tweenable.prototype.queuePop=function(){this._tweenQueue.pop();return this},a.Tweenable.prototype.queueEmpty=function(){this._tweenQueue.length=0;return this},a.Tweenable.prototype.queueLength=function(){return this._tweenQueue.length}})(this);
(function(a){function c(a){return parseInt(a,16)}function b(b){a.Tweenable.util.each(b,function(a,b){if(typeof a[b]==="string"&&(i.test(a[b])||g.test(a[b]))){var d;d=a[b];d=d.replace(/#/g,"");d.length===3&&(d=d.split(""),d=d[0]+d[0]+d[1]+d[1]+d[2]+d[2]);d=[c(d.substr(0,2)),c(d.substr(2,2)),c(d.substr(4,2))];a[b]="rgb("+d[0]+","+d[1]+","+d[2]+")"}})}function d(b){var c;c=[];a.Tweenable.util.each(b,function(a,b){typeof a[b]==="string"&&(i.test(a[b])||g.test(a[b])||k.test(a[b]))&&c.push(b)});return c}
function f(a,b){var c,d,g;d=b.length;for(c=0;c<d;c++)g=a[b[c]].match(/(\d+)/g),a["__r__"+b[c]]=+g[0],a["__g__"+b[c]]=+g[1],a["__b__"+b[c]]=+g[2],delete a[b[c]]}function h(a,b){var c,d;d=b.length;for(c=0;c<d;c++)a[b[c]]="rgb("+parseInt(a["__r__"+b[c]],10)+","+parseInt(a["__g__"+b[c]],10)+","+parseInt(a["__b__"+b[c]],10)+")",delete a["__r__"+b[c]],delete a["__g__"+b[c]],delete a["__b__"+b[c]]}var i=/^#([0-9]|[a-f]){3}$/i,g=/^#([0-9]|[a-f]){6}$/i,k=/^rgb\(\d+\s*,\d+\s*,\d+\s*\)\s*$/i,j;if(a.Tweenable)a.Tweenable.prototype.filter.color=
{tweenCreated:function(a,c,d){b(a);b(c);b(d)},beforeTween:function(a,b,c){j=d(b);f(a,j);f(b,j);f(c,j)},afterTween:function(a,b,c){h(a,j);h(b,j);h(c,j)}}})(this);
(function(a){function c(b){var c;c=[];a.Tweenable.util.each(b,function(a,b){typeof a[b]==="string"&&f.test(a[b])&&c.push(b)});return c}function b(a,b){var c,d;d=b.length;for(c=0;c<d;c++)a[b[c]]=+a[b[c]].replace(f,"")}function d(a,b){var c,d;d=b.length;for(c=0;c<d;c++)a[b[c]]=Math.floor(a[b[c]])+"px"}var f=/px/i,h;if(a.Tweenable)a.Tweenable.prototype.filter.px={beforeTween:function(a,d,f){h=c(d);b(a,h);b(d,h);b(f,h)},afterTween:function(a,b,c){d(a,h);d(b,h);d(c,h)}}})(this);
