/*! Shifty - v0.8.3 - 2013-02-25 - http://jeremyckahn.github.com/shifty */
(function(e){function n(){}var t=function(){"use strict";function i(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function s(e,t){return i(t,function(n){e[n]=t[n]}),e}function o(e,t){return i(t,function(n){typeof e[n]=="undefined"&&(e[n]=t[n])}),e}function u(e,t,n,r,i,s,o){var u=(e-s)/i,f;for(f in t)t.hasOwnProperty(f)&&r.hasOwnProperty(f)&&(t[f]=a(n[f],r[f],p[o[f]],u));return t}function a(e,t,n,r){return e+(t-e)*n(r)}function f(e,t,n){var r=h.prototype.filter;i(r,function(i){r[i][t]&&r[i][t].apply(e,n)})}function l(e,t,n,i,s,o,a,c){var h=t+n,p=Math.min(r(),h),d=p>=h;e._isTweening&&(d||(e._loopId=setTimeout(function(){l(e,t,n,i,s,o,a,c)},1e3/e.fps)),f(e,"beforeTween",[i,s,o,a]),u(p,i,s,o,n,t,a),f(e,"afterTween",[i,s,o,a]),c&&c.call(i,i)),(d||!e._isTweening)&&e.stop(!0)}function c(e,n){var r={};return typeof n=="string"?i(e,function(e){r[e]=n}):i(e,function(e){r[e]||(r[e]=n[e]||t)}),r}function h(e){return e=e||{},this.data={},this._currentState=e.initialState||{},this.fps=e.fps||60,this._easing=e.easing||t,this}var t="linear",n=500,r=function(){return+(new Date)};h.prototype.tween=function(e,i,u,a,l){if(this._isTweening)return;this._loopId=0,this._pausedAtTime=null;if(arguments.length>1)this._targetState=i||{},this._duration=u||n,this._callback=a,this._easing=l||t,this._currentState=e||{};else{var h=e;this._step=h.step,this._callback=h.callback,this._targetState=h.to||h.target||{},this._duration=h.duration||n,this._easing=h.easing||t,this._currentState=h.from||{}}this._timestamp=r();var p=this._currentState,d=this._targetState;o(p,d),o(d,p),this._easing=c(p,this._easing);var v=this._originalState=s({},p);return f(this,"tweenCreated",[p,v,d,this._easing]),this._isTweening=!0,this.resume(),e.start&&e.start(),this},h.prototype.to=function(e,t,n,r){return arguments.length===1?"to"in e?(e.from=this.get(),this.tween(e)):this.tween(this.get(),e):this.tween(this.get(),e,t,n,r),this},h.prototype.get=function(){return s({},this._currentState)},h.prototype.set=function(e){this._currentState=e},h.prototype.stop=function(e){return clearTimeout(this._loopId),this._isTweening=!1,e&&(s(this._currentState,this._targetState),f(this,"afterTweenEnd",[this._currentState,this._originalState,this._targetState,this._easing]),this._callback&&this._callback.call(this._currentState,this._currentState)),this},h.prototype.pause=function(){return clearTimeout(this._loopId),this._pausedAtTime=r(),this._isPaused=!0,this},h.prototype.resume=function(){return this._isPaused&&(this._timestamp+=r()-this._pausedAtTime),l(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step),this},h.prototype.filter={},s(h,{now:r,each:i,tweenProps:u,tweenProp:a,applyFilter:f,shallowCopy:s,defaults:o,composeEasingObject:c}),h.prototype.formula={linear:function(e){return e}};var p=h.prototype.formula;return typeof exports=="object"?module.exports=h:typeof define=="function"&&define.amd?define(function(){return h}):typeof e.Tweenable=="undefined"&&(e.Tweenable=h),h}();(function(){t.shallowCopy(t.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-0.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return e===0?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return e===1?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return e===0?0:e===1?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((e*6-1)*2*Math.PI/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*e*e*(((t*=1.525)+1)*e-t):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?2-(7.5625*(e-=1.5/2.75)*e+.75):e<2.5/2.75?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-0.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})})(),function(){function e(e,n,r,i,s){return t.tweenProps(i,n,e,r,1,0,s)}function n(e,n){var r=n;return typeof n=="string"&&(r={},t.each(e,function(t){r[t]=e[t]})),r}t.interpolate=function(n,r,i,s){var o,u,a;n&&n.from&&(r=n.to,i=n.position,s=n.easing,n=n.from),a=new t,a.easing=s||"linear",o=t.shallowCopy({},n);var f=t.composeEasingObject(n,a.easing);return t.applyFilter(a,"tweenCreated",[o,n,r,f]),t.applyFilter(a,"beforeTween",[o,n,r,f]),u=e(n,o,r,i,f),t.applyFilter(a,"afterTween",[u,n,r,f]),u},t.prototype.interpolate=function(e,n,r){var i;return i=t.interpolate(this.get(),e,n,r),this.set(i),i}}(),function(e){function a(e,t){var n=e.length,r,i=[];for(r=0;r<n;r++)i.push("_"+t+"_"+r);return i}function f(e){var t=e.match(n);return t.length===1&&t.unshift(""),t.join(u)}function l(t){e.each(t,function(e){var n=t[e];typeof n=="string"&&n.match(o)&&(t[e]=c(n))})}function c(e){return v(o,e,h)}function h(e){var t=p(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function p(e){return e=e.replace(/#/,""),e.length===3&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),[d(e.substr(0,2)),d(e.substr(2,2)),d(e.substr(4,2))]}function d(e){return parseInt(e,16)}function v(e,t,n){var r=t.match(e),i=t.replace(e,u);if(r){var s=r.length,o;for(var a=0;a<s;a++)o=r.shift(),i=i.replace(u,n(o))}return i}function m(e){return v(i,e,g)}function g(e){var t=e.match(r),n=t.length,i=e.match(s)[0];for(var o=0;o<n;o++)i+=parseInt(t[o],10)+",";return i=i.slice(0,-1)+")",i}function y(t){var n={};return e.each(t,function(e){var r=t[e];if(typeof r=="string"){var i=T(r);n[e]={formatString:f(r),chunkNames:a(i,e)}}}),n}function b(t,n){e.each(n,function(e){var r=t[e],i=T(r),s=i.length;for(var o=0;o<s;o++)t[n[e].chunkNames[o]]=+i[o];delete t[e]})}function w(t,n){e.each(n,function(e){var r=t[e],i=E(t,n[e].chunkNames),s=S(i,n[e].chunkNames);r=x(n[e].formatString,s),t[e]=m(r)})}function E(e,t){var n={},r,i=t.length;for(var s=0;s<i;s++)r=t[s],n[r]=e[r],delete e[r];return n}function S(e,t){var n=[],r=t.length;for(var i=0;i<r;i++)n.push(e[t[i]]);return n}function x(e,t){var n=e,r=t.length;for(var i=0;i<r;i++)n=n.replace(u,+t[i].toFixed(4));return n}function T(e){return e.match(r)}function N(t,n){e.each(n,function(e){var r=n[e],i=r.chunkNames,s=i.length,o=t[e].split(" "),u=o[o.length-1];for(var a=0;a<s;a++)t[i[a]]=o[a]||u;delete t[e]})}function C(t,n){e.each(n,function(e){var r=n[e],i=r.chunkNames,s=i.length,o="";for(var u=0;u<s;u++)o+=" "+t[i[u]],delete t[i[u]];o=o.substr(1),t[e]=o})}var t,n=/([^\-0-9\.]+)/g,r=/[0-9.\-]+/g,i=new RegExp("rgb\\("+r.source+/,\s*/.source+r.source+/,\s*/.source+r.source+"\\)","g"),s=/^.*\(/,o=/#([0-9]|[a-f]){3,6}/g,u="VAL";e.prototype.filter.token={tweenCreated:function(e,t,n,r){l(e),l(t),l(n),this._tokenData=y(e)},beforeTween:function(e,t,n,r){N(r,this._tokenData),b(e,this._tokenData),b(t,this._tokenData),b(n,this._tokenData)},afterTween:function(e,t,n,r){w(e,this._tokenData),w(t,this._tokenData),w(n,this._tokenData),C(r,this._tokenData)}}}(t)})(this);